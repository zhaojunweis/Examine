<!DOCTYPE html>
<html xmlns:th="http://www.springframework.org/schema/jdbc">
	<head>
		<meta charset="utf-8">
		<title>上机考试系统</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="description" content="">
		<meta name="author" content="">
		<meta http-equiv="refresh" content="60">
		<!-- Le styles -->
		<link href="css/bootstrap.css" rel="stylesheet">
		<link href="css/exam.css" rel="stylesheet">
		<link href="css/bootstrap-responsive.css" rel="stylesheet">



		<style>
			body {
	padding-top: 60px;
	/* 60px to make the container go all the way to the bottom of the topbar */
}
</style>
	</head>


	<body>

		<div class="container">
		<ul id="loginTab" class="nav nav-tabs">
			<li class="active"><a href="#student" data-toggle="tab">学生登录</a>
			</li>
			<li><a href="#teacher" data-toggle="tab">教师登录</a></li>
			<li><a href="#admin" data-toggle="tab">管理员登录</a></li>
		</ul>

		<div id="loginTabContent" class="tab-content">
			<div class="tab-pane fade in active" id="teacher">
				<div class="container">
					<div class="row vertical-center">
						<div class="exam-login">
							<h3>
								<img class="img-circle" src="img/exam-teacher.png" />
								教师登录
							</h3>

							<form id="" class="exam-form" action="teacher_login" method="post">
								<p>
									<input type="text" name="t_name" placeholder="用户名" /> <br /> <input
										type="password" name="t_pass" placeholder="口令" />
								</p>
								<p>
									<input id="btn_teacher" type="button" class="btn btn-primary" value="登录"
										style="width: 100%" />
								</p>
							</form>
						</div>
					</div>
				</div>
			</div>
			<div class="tab-pane fade in active" id="admin">
				<div class="container">
					<div class="row vertical-center">
						<div class="exam-login">
							<h3>
								<img class="img-circle" src="img/exam-admin.png" />
								管理员登录
							</h3>

							<form id="form_administrator"  class="exam-form" action="admin_login" method="post">
								<p>
									<input id="adminname" type="text" name="adminname" placeholder="用户名" /> <br />
									<input id="adminpass"	type="password" name="adminpass" placeholder="口令" />
								</p>
								<p>
									<input id="btn_admin" type="button" class="btn btn-primary" value="登录"
										style="width: 100%" />
								</p>
							</form>
						</div>
					</div>
				</div>
			</div>
			<div class="tab-pane fade in active" id="student">
				<div class="container">
					<div class="exam-info">
						
							<h4>当前没有进行中的考试，不能登录。</h4>
						
						
					</div>

						
					<div class="row vertical-center">
						<div class="exam-login">
							<h3>
								<img class="img-circle" src="img/exam-student.png" />
								学生登录
							</h3>

							<form class="exam-form" action="student_login" method="post">
								<p>
									<input type="text" name="sno" placeholder="学号" />
									<br />
									<input type="text" name="sname" placeholder="姓名" />
								</p>
								<p>


										<input type="submit" class="btn disabled" onclick="return false" value="登录"
											style="width: 100%" />
									
								</p>
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

		<script src="js/jquery.min.js"></script>
		<script src="js/bootstrap.min.js"></script>
		<script src="js/layer/layer.js"></script>

		<script type="text/javascript">
            $(document).ready(function () {

                var path = "[[@{/}]]";
                //教师登录
                $("#btn_teacher").click(function(){

                    var name = $("input[name='t_name']").val() ;
                    var pass = $("input[name='t_pass']").val();

                    if((name!="")&&(pass!="")){
                        $.ajax({
                            type: 'post',
                            url: path+"submitTeacherLogin",
                            data: {
                                tName:name,
                                tPass:pass,
							},
                            success: function(data) {
                                var str = data.status;
                                if(str == 200){
                                    alert(data.message);
                                    window.location.href = path+"teacher_main";
                                }else{
                                    alert(data.message);
                                }
                            },
                            error:function (data) {
                                alert("未知错误，请稍后再试");
                            }
                        });
                    }else{
                        alert("账号密码不能为空");
                    }
                });
                //管理员登录
                $("#btn_admin").click(function(){
                    debugger;
                    var name = $("#adminname").val() ;
                    var pass = $("#adminpass").val();
                    debugger;
                    if((name!="")&&(pass!="")){
                        $.ajax({
                            type: 'post',
                            url: path+"submitAdminLogin",
                            data: $("#form_administrator").serialize(),
                            success: function(data) {
                                debugger
                                var str = data.status;
                                if(str == 200){
                                    debugger
                                    layer.confirm('您已登录成功，确定要进入管理员主页吗？',{
                                        btn:['确定','取消']
									},function(){
                                        window.location.href = path+data.url;
									},function(){
                                        layer.msg('已取消登录',{
                                            time:1500,
											icon:2,
										})
									});

                                }else{
                                    layer.alert('登录失败,请重新确认信息,',{
                                        icon:2,
                                        skin:'layer-ext-moon',
                                    });
                                    $("input[name='adminname']").val("");
                                    $("input[name='adminpass']").val("");
                                }
                            },
                            error:function (data) {
                                layer.alert("未知错误，请稍后再试");
                            }
                        });
					}else{
                       layer.alert("账号密码不能为空");
					}
                });

            });


		</script>
	</body>
</html>
