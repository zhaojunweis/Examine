<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.examine.dao.ExamMapper">

    <resultMap id="examBaseMapper" type="com.examine.domain.TExam">
        <id property="id" column="id"/>
        <result property="examName" column="exam_name"/>
        <result property="examStartTime" column="exam_start_time"/>
        <result property="tName" column="t_name"/>
        <result property="examPaperUrl" column="exam_paper_url"/>
        <result property="isAutoStart" column="is_auto_start"/>
        <result property="isStart" column="is_start"/>
        <result property="isPigeonhole" column="is_pigeonhole"/>
        <result property="isDelete" column="is_delete"/>
    </resultMap>

    <update id="nonphysicalDeleteOneExamByName" parameterType="String">
         update
         t_exam
         set
         is_delete = 1
         where
         exam_name = #{examName}
    </update>

    <insert id = "saveExaminationInfo" parameterType="com.examine.domain.TExam"
            useGeneratedKeys="true" keyProperty="id">
        insert
        into t_exam(
           exam_name,
           exam_start_time,
           t_name,
           is_auto_start
        )values (
           #{examName},
           #{examStartTime},
           #{tName},
           #{isAutoStart}
        )
    </insert>

    <update id="uploadExamPaper" parameterType="Map">
        update
        t_exam
        set exam_paper_url = #{examPaperUrl}
        where
        exam_name = #{examName}
    </update>

    <update id="stopExam" parameterType="String">
        update t_exam set is_start = 0 where exam_name = #{examName}
    </update>

    <update id="clearExam">
        update t_exam set is_delete = 1 where is_delete = 0 and is_start = 0
    </update>

    <select id = "selectAllExamInfo" resultMap="examBaseMapper">
         select * from t_exam
    </select>

    <select id = "selectOneExamInfoById" parameterType="Integer" resultMap="examBaseMapper">
        select * from t_exam where id=#{id}
    </select>
</mapper>
